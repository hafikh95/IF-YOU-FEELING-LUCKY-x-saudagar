<!doctype html>
<html lang="ms">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Promo Nasib-Nasib üéÅ</title>
  <style>
    :root{--bg:#0f172a;--card:#111827;--text:#e5e7eb;--muted:#9ca3af;--accent:#22c55e;}
    *{box-sizing:border-box} body{margin:0;background:radial-gradient(1200px 600px at 20% -10%,#1e293b,transparent),radial-gradient(900px 500px at 120% 10%,#0b1220,transparent),var(--bg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    .wrap{min-height:100vh;display:grid;place-items:center;padding:24px}
    .card{width:100%;max-width:460px;background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.08);backdrop-filter:blur(6px);border-radius:20px;padding:24px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
    h1{color:var(--text);font-size:26px;margin:0 0 8px}
    p{color:var(--muted);margin:0 0 16px;line-height:1.5}
    .btn{width:100%;padding:14px 16px;border-radius:12px;border:1px solid rgba(255,255,255,.12);background:linear-gradient(180deg,#16a34a,#15803d);color:white;font-weight:700;font-size:16px;cursor:pointer;transition:.2s;box-shadow:0 8px 20px rgba(34,197,94,.25)}
    .btn:hover{transform:translateY(-1px)}
    .btn:disabled{opacity:.6;cursor:not-allowed;transform:none}
    .code{margin-top:14px;padding:14px;border-radius:12px;background:#0b1220;border:1px dashed rgba(255,255,255,.18);color:#d1fae5;font-weight:700;text-align:center;font-size:18px;letter-spacing:.4px}
    .small{font-size:12px;color:var(--muted);margin-top:10px}
    .footer{margin-top:16px;display:flex;justify-content:space-between;align-items:center}
    .badge{font-size:12px;background:rgba(34,197,94,.15);border:1px solid rgba(34,197,94,.35);color:#86efac;padding:6px 10px;border-radius:999px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>üéÅ Promo Nasib-Nasib</h1>
      <p>Tekan butang di bawah untuk dapat <strong>promo rawak</strong>. Setiap peranti hanya boleh tebus <strong>sekali</strong>.</p>

      <button id="claimBtn" class="btn">Dapatkan Promo</button>
      <div id="result" class="code" style="display:none"></div>
      <div class="footer">
        <span id="claimedBadge" class="badge" style="display:none">Promo sudah ditebus</span>
        <span class="small" id="visitNote"></span>
      </div>
      <p class="small">Terma ringkas: Promo rawak, tidak boleh ditukar. Tunjuk skrin ini di kaunter semasa pembayaran.</p>
    </div>
  </div>

  <script>
    // ================== KONFIGURASI ==================
    // Edit senarai promo anda di sini. Anda boleh guna teks ringkas atau "KOD: DISKAUN".
    const PROMOS = [
      "KOD: SAUDAGAR5 ‚Äî Diskaun 5%",
      "KOD: SAUDAGAR7 ‚Äî Diskaun 7%",
      "KOD: SAUDAGAR10 ‚Äî Diskaun 10%",
      "FREE ICED TEA ‚Äî Dengan sebarang pembelian",
      "UPSIZE PERCUMA ‚Äî Minuman sahaja",
      "RM2 OFF ‚Äî Min order RM20",
      "RM5 OFF ‚Äî Min order RM40",
      "KUIH FREE ‚Äî Selagi stok masih ada"
    ];

    // Pilihan odds (optional). Jika nak peluang tak sama, set weight ikut index PROMOS.
    // Kalau semua sama rata, biar null.
    const WEIGHTS = null; // contoh: [1,1,1,1,1,0.6,0.4,0.8]

    // Kunci untuk localStorage
    const KEY_CLAIMED = "promo_claimed_v1";
    const KEY_PROMO = "promo_code_v1";
    const KEY_VISITS = "promo_visits_v1";
    // ================================================

    // Util pilih rawak ikut weight (jika ada)
    function weightedRandom(items, weights) {
      if (!weights) {
        return items[Math.floor(Math.random() * items.length)];
      }
      const sum = weights.reduce((a,b)=>a+b,0);
      let r = Math.random() * sum;
      for (let i=0;i<items.length;i++){
        if ((r -= weights[i]) < 0) return items[i];
      }
      return items[items.length-1];
    }

    function pickRandomPromo() {
      return weightedRandom(PROMOS, WEIGHTS || Array(PROMOS.length).fill(1));
    }

    // Inisialisasi lawatan
    const visits = Number(localStorage.getItem(KEY_VISITS) || 0) + 1;
    localStorage.setItem(KEY_VISITS, String(visits));
    document.getElementById("visitNote").textContent = "Lawatan #" + visits;

    const claimed = localStorage.getItem(KEY_CLAIMED) === "1";
    const resultEl = document.getElementById("result");
    const btn = document.getElementById("claimBtn");
    const badge = document.getElementById("claimedBadge");

    function showClaimed(promo) {
      resultEl.style.display = "block";
      resultEl.textContent = promo;
      btn.disabled = true;
      badge.style.display = "inline-block";
    }

    if (claimed) {
      const saved = localStorage.getItem(KEY_PROMO) || "Promo anda telah direkodkan.";
      showClaimed(saved);
    }

    btn.addEventListener("click", () => {
      if (localStorage.getItem(KEY_CLAIMED) === "1") return;
      const promo = pickRandomPromo();
      localStorage.setItem(KEY_CLAIMED, "1");
      localStorage.setItem(KEY_PROMO, promo);
      showClaimed(promo);
    });

    // Bonus: auto-claim untuk UX ‚Äúsekali tekan‚Äù
    // Jika nak claim automatik bila buka page, uncomment di bawah:
    // if (!claimed) btn.click();
  </script>
</body>
</html>
